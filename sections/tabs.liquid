<section
  class="
    Section
    Section--PaddingBlock{{ section.settings.padding_block | camelcase }}
    ColorScheme--{{ section.settings.color_scheme.id | camelcase }}
  "
>
  <div class="Section__Inner">
    <div class="Tabs">
      {% render 'text', text: section.settings.heading, as: 'h2', variant: 'heading-medium' %}

      <div class="Tabs__Header">
        {% for block in section.blocks %}
          <label class="Tabs__Title">
            <input
              class="u-Hidden"
              type="radio"
              name="tab"
              value="{{ block.settings.collection.handle }}"
              {% if forloop.first %}
                checked
              {% endif -%}
              Heading
            >
            {% assign tab_title = block.settings.title | default: block.settings.collection.title %}
            {% render 'text', text: tab_title, transform: 'uppercase' %}
          </label>
        {% endfor %}
      </div>

      <div class="Tabs__Content">
        {% for block in section.blocks %}
          {% if block.settings.set_limit %}
            {% assign block_limit = block.settings.limit %}
          {% else %}
            {% assign block_limit = block.settings.limit %}
          {% endif %}
          <div class="Tabs__Item">
            {% render 'product-list', products: block.settings.collection.products, limit: block_limit %}
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
</section>

{% stylesheet %}
  .Tabs {
    display: flex;
    flex-direction: column;
    gap: var(--size-l);
  }

  .Tabs__Header {
    display: flex;
    justify-content: flex-start;
    gap: var(--size-l);
  }

  .Tabs__Title {
    cursor: pointer;
  }

  .Tabs__Title:has(input:checked) {
    text-decoration: underline;
    text-underline-offset: 2px;
    text-decoration-thickness: 2px;
    font-weight: var(--font-weight-bold);
  }

  .Tabs:has(.Tabs__Title:nth-of-type(1) input:checked) .Tabs__Item:not(:nth-of-type(1)) {
    display: none;
  }

  .Tabs:has(.Tabs__Title:nth-of-type(2) input:checked) .Tabs__Item:not(:nth-of-type(2)) {
    display: none;
  }

  .Tabs:has(.Tabs__Title:nth-of-type(3) input:checked) .Tabs__Item:not(:nth-of-type(3)) {
    display: none;
  }

  .Tabs:has(.Tabs__Title:nth-of-type(4) input:checked) .Tabs__Item:not(:nth-of-type(4)) {
    display: none;
  }
{% endstylesheet %}

{% schema %}
{
  "name": "t:sections.tabs.name",
  "disabled_on": {
    "groups": ["header", "footer", "aside"]
  },
  "settings": [
    {
      "type": "header",
      "content": "t:sections.all.headers.section_appearance.content"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.settings.color_scheme.label",
      "info": "t:sections.all.settings.color_scheme.info"
    },
    {
      "type": "select",
      "id": "padding_block",
      "label": "t:sections.all.settings.padding_block.label",
      "default": "medium",
      "options": [
        { "value": "none", "label": "t:sections.all.settings.padding_block.options.none.label" },
        { "value": "small", "label": "t:sections.all.settings.padding_block.options.small.label" },
        { "value": "medium", "label": "t:sections.all.settings.padding_block.options.medium.label" },
        { "value": "large", "label": "t:sections.all.settings.padding_block.options.large.label" }
      ]
    },
    {
      "type": "header",
      "content": "t:sections.all.headers.section_content.content"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "t:sections.all.settings.heading.label",
      "default": "t:sections.all.settings.heading.default"
    }
  ],
  "blocks": [
    {
      "name": "t:sections.tabs.blocks.name",
      "type": "tab-block",
      "limit": 4,
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "t:sections.tabs.settings.title.label",
          "info": "t:sections.tabs.settings.title.info"
        },
        {
          "type": "collection",
          "id": "collection",
          "label": "t:sections.tabs.settings.collection.label"
        },
        {
          "type": "checkbox",
          "id": "set_limit",
          "label": "t:sections.all.settings.set_limit.label",
          "default": false
        },
        {
          "type": "number",
          "id": "limit",
          "label": "t:sections.tabs.settings.limit.label",
          "default": 4,
          "visible_if": "{{ block.settings.set_limit }}"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.tabs.presets.tabs.name"
    }
  ]
}
{% endschema %}
